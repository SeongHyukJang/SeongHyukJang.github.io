---
title:  "[AWS] EC2 이해하기"

categories:
  - AWS Service
tags:
  - [EC2]

toc: true
toc_sticky: true

date: 2021-07-18
last_modified_at: 2022-02-05
---



> ## 개념

&nbsp; Amazon Elastic Compute Cloud(Amazon EC2)는 AWS에서 제공하는 가상의 컴퓨터다. 웹 서버, 스토리지 등 사용자가 원하는 방식으로 사용이 가능하다.

> ## 특징

- AWS는 EC2를 Host Machine에 Hypervisor로 가상화 하여 Multitenancy 환경으로 관리한다.
- EC2 하나에 최대 27개의 EBS를 연결할 수 있다.
- EC2는 'pay-as-you-go' 서비스를 제공하기 때문에 On-premise 환경과 달리 증설해야 할 서버의 개수를 예측할 필요가 없다. 즉, 효율적으로 scale in/out을 할 수 있다.
- 여러 OS에 호환되고 데이터베이스 또는 Third Party 소프트웨어도 사용이 가능하다.
- 사용자들은 사용 목적에 맞는 EC2의 종류와 가격 측정 옵션을 선택할 수 있다.

> ## 종류

사용자는 EC2를 다양한 목적으로 사용할 수 있기 때문에 AWS는 여러 종류의 EC2를 제공한다.

1. General Purpose
- 범용적으로 사용된다. Compute, Memory, Networking등 대부분의 자원이 적당한 성능을 가지고 있다.
- 애플리케이션 서버, 백엔드 서버, 중소규모의 데이터베이스로 활용이 가능하다.

2. Compute Optimized
- 높은 성능의 프로세서를 가지고 있다. 즉, 컴퓨팅을 많이 해야할 때 사용한다.
- 배치 서버, 게임 서버로 활용이 가능하다.

3. Memory Optimized
- 큰 용량의 메모리를 가지고 있다. 메모리에 적재될 데이터가 많은 작업이 필요할 때 사용할 수 있다.
- 데이터 조회와 같은 I/O가 많은 큰 규모의 데이터베이스를 EC2로 사용할 때 활용이 가능하다.

4. Accelerated Computing
- 하드웨어 가속과 코프로세서를 사용한다. 즉, CPU에서 빠르게 계산이 가능한 컴퓨터다.
- 소수점 계산과 같이 계산이 많이 필요한 컴퓨터에 활용할 수 있다.

5. Storage Optimized
- 많은 양의 데이터가 저장되어 있는 스토리지에서 IO가 많을 때 적합한 컴퓨터다.
- 분산 파일 저장 시스템, 데이터 웨어하우싱 애플리케이션, 고성능 OLTP(Online Transaction Proccessing) 시스템에 활용된다.

> ## 가격 측정 옵션

1. On-demand
- 고객이 사용한 기간만큼 비용이 청구된다.
- 짧은 기간동안 사용할 때 적합하기 때문에 테스트 용도로 EC2를 사용할 때 주로 활용된다.

2. Savings Plans
- 1년 또는 3년의 약정 기간을 정하는 대신에 On-demand 대비 낮은 가격으로 EC2를 사용할 수 있다.
- 시간당 EC2의 사용률을 예상하고 금액을 정하고 기간을 약정하는 방식이다. ex.) 10$/hour로 1년 약정

3. Reserved Instances
- EC2의 종류와 개수를 정하고 약정하는 방식이다.
- Savings Plans와 비슷하지만 EC2를 종료한다거나 Region을 변경하는 것과 같은 작업이 일어나면 On-demand 방식으로 자동으로 변경된다.
- [참고 자료](https://www.cloudhealthtech.com/blog/reserved-instances-vs-aws-saving-plans)

4. Spot Instances
- 설정한 시간대에만 EC2가 동작하여서 해당 시간대만큼 비용이 청구된다. 즉, EC2의 시작 시간과 종료 시간이 일정할 때 사용하기에 적합하다.
- 배치 서버와 같이 일정 시간대에 일괄 처리하는 시스템에 사용할 수 있다.

5. Dedicated Hosts
- 가상으로 빌리는 것이 아니라 물리적인 서버 컴퓨터를 직접 빌려서 사용할 때 측정 되는 방식이다. 그렇기 때문에 가장 높은 가격의 비용이 청구 된다.

> ## 배치 그룹

&nbsp; 여러 개의 EC2 인스턴스를 생성하고 배치할 때, 배치하는 방법을 정하기 위해 사용하는 서비스다. 상호 간의 오류와 같은 위험성을 줄이기 위해서 사용되며, 총 3가지 방법을 제공한다.

### 1. 클러스터 배치 그룹

&nbsp; 하나의 가용 영역 내에 EC2를 배치하는 방법이다.

<br>
이 방식을 사용하는 경우 다음과 같다.
- 짧은 네트워크 지연 시간이 필요할 때
- 높은 네트워크 처리량이 필요할 때
- 대부분의 네트워크 트래픽이 EC2 사이에서 일어날 때

![image](https://user-images.githubusercontent.com/49023663/162223977-d4a29e50-f449-4935-92fe-68463e3a7934.png)


### 2. 파티션 배치 그룹

&nbsp; EC2 인스턴스를 파티션으로 논리적으로 나누어서 배치하는 방식이다. 동일한 리전 내에서 여러 가용 영역에 파티션을 배치할 수 있다. 하지만 다른 리전은 불가능하다.

<br>
이 방식을 사용하는 경우는 다음과 같다.
- 애플리케이션 단위로 파티션을 나누고 관리가 필요할 때
- 애플리케이션 내에 일어나는 장애를 전체 시스템에 영향 주지 않고 싶을 때
- 대규모 분산 시스템을 사용하고 싶을 때 (HDFS, Cassandra 등)

![image](https://user-images.githubusercontent.com/49023663/162224043-d9ece6a8-1593-454d-b910-06e3581569d7.png)

### 3. 분산 배치 그룹

&nbsp; 한 렉에 하나의 EC2 인스턴스를 배치하는 방식이다. 즉, AWS 데이터 센터의 한 렉에서 오직 하나의 가상화된 EC2만 사용한다. 동일한 리전 내에서 여러 가용 영역에 적용할 수 있으며, 가용 영역 별로 최대 7개의 인스턴스를 실행할 수 있다.

<br>
이 방식을 사용하는 경우는 다음과 같다.
- 인스턴스 각각이 서로 떨어져 있어야 할 때
- 분산 시스템을 사용하고 싶지만 EC2의 개수가 적을 때

![image](https://user-images.githubusercontent.com/49023663/162224072-20dd2d6d-a393-4ff3-888f-73808e08b5e0.png)