---
title:  "[AWS] CloudFront 이해하기"

categories:
  - AWS Service
tags:
  - [CloudFront]

toc: true
toc_sticky: true

date: 2022-04-11
last_modified_at: 2022-04-11
---

>## 개념

&nbsp; Amazon CloudFront는 AWS에서 제공하는 CDN 서비스다. 즉, CloudFront는 한 곳에 모여 있는 콘텐츠를 전세계에 있는 각 위치에 캐싱을 통해 사용자의 요청에 대한 낮은 지연 시간을 제공한다. 

- 콘텐츠들의 원본이 있는 서버를 'Origin Server'(원본 서버)라 하고, 캐싱되는 지역을 'Edge Location'(엣지 로케이션)라 한다.


>## 특징

- 사용자가 콘텐츠를 요청 했을 때 콘텐츠가 Edge Location에 캐시되어 있다면, Edge Location에서 즉시 응답한다.
- 사용자가 콘텐츠를 요청 했을 때 콘텐츠가 Edge Location에 캐시되어 있지 않다면, 원본 서버에서 응답을 한 후에 사용자와 가장 가까운 Edge Location에 내용을 캐시한다.
- 원본에 대한 사본이 여러 Edge Location에 캐시되므로 가용성이 향상된다고 말할 수 있다.
- 정적 및 동적 웹 콘텐츠 모두 캐시할 수 있다.
- 원본 서버는 S3 버킷, ELB, EC2 인스턴스 등이 가능하다.

>## 기능

### 1. 무효화

&nbsp; 무효화는 Edge Location에 캐시 되어 있는 파일을 제거하는 기능이다. CloudFront 서비스는 Edge Location에서 직접 파일을 제거하는 방법이 없기 때문에 해당 기능을 이용해야 한다.

- 파일에 대한 경로를 명시함으로써 무효화할 수 있다. ( 예. /images/my-image.jpg )
- 월별로 최초 1,000개의 경로는 무료지만 초과하면 요금이 청구된다.

### 2. 만료 기간 관리

&nbsp; 콘텐츠를 캐시할 때 만료 기간을 설정할 수 있다. 즉 Edge Location에서 캐시된 파일을 보관하는 시간을 어떻게 설정하느냐에 따라서 성능이 결정된다.

- 만료 기간을 길게 설정할 경우, 사용자에게 콘텐츠를 바로 제공할 확률이 높기 때문에 사용자에게 제공되는 성능이 향상 되고 원본 서버에 걸리는 부하도 줄어든다. 하지만, 최신 버전을 가지고 있을 확률이 줄어든다.
- 콘텐츠를 캐시할 때 Default 기간은 24시간이다.
- 설정하는 방법은 헤더를 추가하는 방식으로 진행한다. (max-age, s-maxage 등)
- 만료 기간을 0초로 설정할 경우, 콘텐츠를 캐시하지 않는다는 의미다.